(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{199:function(e,t,a){e.exports=a(415)},204:function(e,t,a){},205:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},206:function(e,t,a){},235:function(e,t){},415:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(52),o=a.n(r),l=(a(204),a(168)),i=a(8),s=(a(205),a(206),a(95),a(155)),u=a.n(s),m=a(156),p=a(157),d=a(54),E=a(169),h=a(167),k=a(158),v=a.n(k),f=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={checked:!1},e.handleChange=e.handleChange.bind(Object(d.a)(e)),e}return Object(p.a)(a,[{key:"handleChange",value:function(e){this.props.my_socket.connected?(alert("Socket Cerrado "),this.props.my_socket.close()):(alert("Socket Abierto"),this.props.my_socket.open()),this.setState({checked:e})}},{key:"render",value:function(){return n.a.createElement("label",null,n.a.createElement("span",null,"Apaga o Prende el socket!!"),n.a.createElement(v.a,{onChange:this.handleChange,checked:this.state.checked}))}}]),a}(c.Component),b=a(19),O=u()("https://le-18262636.bitzonte.com/",{path:"/stocks"});function j(e,t){for(var a in t)if(e==t[a].company_name)return t[a].ticker;return"Not found"}function w(e,t){return isNaN(t[e])?0:t[e]}function S(e,t,a){var c=0;for(var n in e)c+=w(j(e[n],a),t);return c}function y(e,t){return isNaN(t[e])?0:t[e]}function g(e,t){return isNaN(t[e])?0:t[e]}O.emit("EXCHANGES"),O.emit("STOCKS");var C=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(c.useState)([]),s=Object(i.a)(o,2),u=s[0],m=s[1],p=Object(c.useState)([]),d=Object(i.a)(p,2),E=d[0],h=d[1],k=Object(c.useState)([]),v=Object(i.a)(k,2),j=v[0],C=v[1],N=Object(c.useState)([]),_=Object(i.a)(N,2),A=_[0],T=_[1],D=Object(c.useState)([]),L=Object(i.a)(D,2),V=L[0],B=L[1],I=Object(c.useState)([]),K=Object(i.a)(I,2),M=K[0],P=K[1],U=Object(c.useState)([]),x=Object(i.a)(U,2),J=x[0],G=x[1],H=Object(c.useState)({}),W=Object(i.a)(H,2),X=W[0],$=W[1],z=[],Y={},q={},F={},Q={},R={},Z={},ee={};Object(c.useEffect)((function(){O.once("STOCKS",(function(e){r(Object(l.a)(e))})),O.once("EXCHANGES",(function(e){for(var t in e)z.push(e[t]);m([].concat(z))})),O.on("BUY",(function(e){isNaN(Y[e.ticker])?(Y[e.ticker]=e.volume,h(Y)):(Y[e.ticker]+=e.volume,h(Y))})),O.on("SELL",(function(e){isNaN(q[e.ticker])?(q[e.ticker]=e.volume,C(q)):(q[e.ticker]+=e.volume,C(q))})),O.on("UPDATE",(function(e){if(isNaN(F[e.ticker])){F[e.ticker]=e.value,T(F),ee[e.ticker]=[],(t={}).time=new Date(e.time).toLocaleString("es-CL"),t.value=e.value,ee[e.ticker].push(t),$(ee),Q[e.ticker]=e.value,B(Q),R[e.ticker]=e.value,Z[e.ticker]=e.value,P(R),G(Z)}else{Q[e.ticker]=F[e.ticker],B(Q),F[e.ticker]=e.value,T(F);var t={},a=new Date(e.time),c=new Date(a.getTime()+1e3).toLocaleString("es-CL");t.time=c,t.value=e.value,ee[e.ticker].push(t),$(ee);var n=R[e.ticker],r=Z[e.ticker];e.value>r&&(Z[e.ticker]=e.value),e.value<n&&(R[e.ticker]=e.value),P(R),G(Z)}}))}),[]);var te=Object(c.useState)(0),ae=Object(i.a)(te,2),ce=(ae[0],ae[1]);return Object(c.useEffect)((function(){var e=setInterval((function(){ce((function(e){return++e}))}),2e3);return function(){return clearInterval(e)}}),[]),n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement("h1",null,"IIC3103 Jparavich Stock Market"),n.a.createElement("div",null,n.a.createElement(f,{my_socket:O})),n.a.createElement("center",null,n.a.createElement("table",{class:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Exchange"),n.a.createElement("th",{scope:"col"},"Country"),n.a.createElement("th",{scope:"col"},"Volumen Compra"),n.a.createElement("th",{scope:"col"},"Volumen Venta"),n.a.createElement("th",{scope:"col"},"Volumen Total"),n.a.createElement("th",{scope:"col"},"Cantidad Acciones"),n.a.createElement("th",{scope:"col"},"Participaci\xf3n de Mercado"))),u.map((function(e){return n.a.createElement("tr",null,n.a.createElement("td",{scope:"row"},e.name),n.a.createElement("td",{scope:"row"},e.country),n.a.createElement("td",{scope:"row"},S(e.listed_companies,E,a)," "),n.a.createElement("td",{scope:"row"},S(e.listed_companies,j,a)," "),n.a.createElement("td",{scope:"row"},S(e.listed_companies,E,a)+S(e.listed_companies,j,a)," "),n.a.createElement("td",{scope:"row"},e.listed_companies.length),n.a.createElement("td",{scope:"row"},function(e,t,a,c,n){var r=0,o=0;for(var l in e)r+=S(e[l].listed_companies,a,n),r+=S(e[l].listed_companies,c,n);return o+=S(t.listed_companies,a,n),(o+=S(t.listed_companies,c,n))/r}(u,e,E,j,a)))})))),n.a.createElement("center",null,n.a.createElement("table",{class:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Company Stock"),n.a.createElement("th",{scope:"col"},"Country"),n.a.createElement("th",{scope:"col"},"Volumen Total Transado"),n.a.createElement("th",{scope:"col"},"Alto historico"),n.a.createElement("th",{scope:"col"},"Bajo historico"),n.a.createElement("th",{scope:"col"},"Ultimo Precio"),n.a.createElement("th",{scope:"col"},"Variaci\xf3n porcentual (%)"))),a.map((function(e){return n.a.createElement("tr",null,n.a.createElement("td",{scope:"row"},e.company_name),n.a.createElement("td",{scope:"row"},e.country),n.a.createElement("td",{scope:"row"},w(e.ticker,E)+w(e.ticker,j)),n.a.createElement("td",{scope:"row"},g(e.ticker,J)," "),n.a.createElement("td",{scope:"row"},g(e.ticker,M)," "),n.a.createElement("td",{scope:"row"},y(e.ticker,A)," "),n.a.createElement("td",{scope:"row"},(y(e.ticker,A)-y(e.ticker,V))/y(e.ticker,A)*100," "),n.a.createElement("td",{scope:"row"},console.log(X[e.ticker]),n.a.createElement(b.c,{key:Math.random(),width:360,height:320,data:X[e.ticker],redraw:!0},n.a.createElement(b.e,{dataKey:"time",label:{value:"Time",position:"insideBottom"}}),n.a.createElement(b.f,{label:{value:"$USD",angle:-90,position:"insideLeft"}}),n.a.createElement(b.d,null),n.a.createElement(b.a,{stroke:"#eee",strokeDasharray:"5 5"}),n.a.createElement(b.b,{type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))))}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.9e01ce95.chunk.js.map